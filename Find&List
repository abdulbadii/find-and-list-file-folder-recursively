#! /usr/bin/bash
l(){
r=%p;i=;o=
for a
{
let i++
case ${a:0:3} in
	-s) r='%s %p';;
	-t) r='%p %Tr %Tx';;
	-st|-ts) r="%s %p %Tr %Tx";;
	-[0-9][0-9]|-*) o="$o $a";;
	*)
	if [ -e "$a" ];then
		a=${@:$i}
		if [ "${a:0:1}" = / ];then
			b=${@:i:1};	c=${@: -1};
			for((j=1;;j++))
			{	[ ${b:j:1} != ${c:j:1} ]&&break;}
			p=${b:0:j};	b=
		else p=~+;	b=".*/"
		fi
		find "$p" -regextype posix-extended -iregex "$b(${a// /|})" $o -printf "$r \n"
	elif [ "${a:0:1}" = / ];then
		p=${a%%[*?]*};	p=${p%/*}/
		a=${a#$p}
		a=${a//./\\.}
		if [[ $a =~ \*\* ]] ;then
			a=${a//\*\*///};a=${a//\*/[^\/]*};a=${a//\/\//.*};
		else	a=${a//\*/[^\/]*}
		fi
		find "$p" -regextype posix-extended -iregex "$p${a//\?/.}" $o -printf "$r \n"
	else
		a=${a//./\\.};a=${a//\*/.*}
		find ~+ -regextype posix-extended -iregex ".*/${a//\?/.}" $o -printf "$r \n"
	fi
	return;;
esac
}
}
